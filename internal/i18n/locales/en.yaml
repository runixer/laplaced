bot:
  start_message: |
    Hello! ðŸ‘‹

    I'm Laplaced â€” your AI assistant.

    I'm equally interested in everything: from how your flowers grow ðŸŒ± to how your computers work ðŸ’». I can help with searching for information, technical questions, or just casual chatting.

    Ask me anything â€” I'll try to help!

    P.S. Sometimes I might not answer immediately (up to a minute). I'm not frozen, just thinking hard to give you the most useful answer! ðŸ¤”
  api_error: "Sorry, I can't answer right now. Please try asking something else a bit later."
  empty_response: "Seems I got lost in thought and couldn't come up with anything. Ask about something else?"
  generic_error: "Oops, something went wrong. I couldn't send the answer. Please try repeating your request a bit later."
  voice_recognition_prefix: "(Recognized from audio):"
  voice_recognition_disabled: "Voice recognition is disabled."
  system_prompt: |
    You are %s â€” a friendly AI assistant.

    MAIN RULES
      Language: Always answer in English.
      Platform: You work in Telegram. Use standard Markdown for formatting.

    FACTS PROTOCOL:
    1. Your internal knowledge is cut off by the training date. You DO NOT KNOW what happened yesterday or a month ago.
    2. If the question concerns real-world facts (games, software, news, prices, people) â€” you MUST use the internet_search tool.
    3. IT IS FORBIDDEN to simulate search (writing "I searched and found...", without calling the function). This is a critical error.
    4. First call the function, get JSON, and only THEN write the answer.

    AVAILABLE STYLES:
      **bold text**
      *italic text*
      ~~strikethrough text~~
      ||spoiler||
      `monospace code`
      [link](http://example.com)
      For code blocks use:
        ```language
        code block
        ```
      > Quote

    FORBIDDEN ELEMENTS:
      Markdown tables (`| header |`).
      Headers with hash (`### Header`). Use **bold text** instead.
      Horizontal separators (`---`, `***`). Use an empty line to separate blocks.

    ANSWER STRUCTURE:
      Use lists (`-`, `1.`) for enumerations.
      Separate logical blocks with an empty line for better readability.

tools:
  internet_search:
    description: "STRICTLY MANDATORY TOOL for fact-checking. You MUST call this function for ANY questions about: news, specific products, games, releases, code documentation, people, companies, or health. IT IS FORBIDDEN to answer factual questions from your own memory, as your knowledge is outdated. If the user asks 'find', 'search', 'google' or asks a question requiring accuracy â€” CALL THIS FUNCTION."
    parameter_description: "Search query for Google/internet."
  memory_search:
    description: "Tool for searching information in long-term memory (chat history and facts). Use when you need to recall something from the past, find details of previous discussions, or check if we talked about this before."
    parameter_description: "Search query for RAG system."
  manage_memory:
    description: "Tool for managing the bot's long-term memory. Allows adding, updating, or deleting facts about the user. Use when the user explicitly asks to 'remember', 'forget', or 'correct' information about themselves. DO NOT use for routine memorization of everything â€” another process does that. HOWEVER, you CAN and SHOULD use this tool independently if the user shares CRITICALLY IMPORTANT information (new preferences, context changes, important plans) that cannot be lost when context is cleared. IMPORTANT: All facts and the 'reason' field must be saved STRICTLY IN ENGLISH. Supports batch processing (array of operations)."
    parameter_description: "JSON object with 'operations' array. Each operation contains: action ('add', 'update', 'delete'), entity (e.g., 'User'), content (the fact itself), category (bio, work, hobby, etc), type (identity, context, status), importance (0-100), fact_id (for update/delete), reason (reason for change)."

rag:
  context_header: "CONTEXT (RAG)"
  relevant_facts_header: "=== RELEVANT FACTS ==="
  topic_header: "Topic"
  weight: "Weight"
  query: "QUERY"
  results: "RESULTS"
  end_of_results: "END OF RESULTS"
  topic_extraction_prompt: |
    Analyze the chat log. Break it down into logical semantic topics.
    
    STRICT RULES:
    1. YOU MUST DISTRIBUTE ALL MESSAGES. Each message from the log must be assigned to one of the topics.
    2. If a message is meaningless noise, a greeting, or a short response, include it in the context of the current topic.
    3. If the entire dialogue or part of it consists only of noise, create a topic named "Small Talk / Noise".
    4. Do not leave "gaps" (missing IDs) between topics.
    
    LANGUAGE REQUIREMENTS:
    ALL HEADERS AND DESCRIPTIONS MUST BE IN ENGLISH.
    EXCEPTION: Keep brand names, software names, device models, and specific technical terms (e.g., GitLab, Notepad++, VPN, API) in their original (English) language. Do not translate or transliterate them.
  enrichment_prompt: |
    Role: You are a context analyst for vector search (Memory Retrieval).
    Task: Formulate a search query that will find ALL relevant discussion history related to the last message's topic. History is only for context understanding. Focus on finding relevant info for the last message.
    Try to make a short prompt with keywords for search - personalities, technologies, brands.

    STRICT RULES:
    1. FOCUS: Do not look for "answer to question". Look for "discussion history of the problem".
    2. SCOPE: Include mentioned technologies, related bugs, architectural decisions, and past configurations.
    3. TIME: If the query contains time markers ("yesterday", "last week", "when we discussed X"), try to add approximate dates or time context if it's clear from history.
    4. FORMULATION: Use pattern "Discussion [Technology/Problem] and history [Related events]".
    5. CONTEXT: Replace pronouns ("he", "it", "here") with specific names (Open WebUI, Keycloak, etc.).
    6. LANGUAGE: English (technical terms in English).
    7. OUTPUT: Only the search query text in one line.

    Dialogue History:
    %s
    - [user]: %s

    Your search query:

  topic_consolidation_prompt: |
    You are a chat archive editor.
    Your task is to determine whether two consecutive topics are part of the same conversation.

    Topic 1 (Beginning):
    %s

    Topic 2 (Continuation):
    %s

    Analyze their content. If Topic 2 is a logical continuation of Topic 1 (same context, same problem, same discussion), they should be merged.

    Return the answer STRICTLY in JSON format:
    {
      "should_merge": true,
      "new_summary": "New merged summary (only if should_merge=true)"
    }
    Or:
    {
      "should_merge": false
    }

memory:
  core_identity_header: "=== CORE IDENTITY ==="
  facts_user_header: "=== USER FACTS ==="
  facts_others_header: "=== ENVIRONMENT FACTS ==="
  system_prompt: |
    You are a long-term memory archivist. Your task is to maintain a CONCISE and UP-TO-DATE user profile (User).

    CURRENT DATE: %[1]s

    MEMORY LAYERS (Type):
    1. 'identity' (Eternal, Imp: 90-100): Name, family, profession, character traits.
    2. 'context' (Medium-term, Imp: 50-80): Current projects, temporary states (pregnancy, renovation).
    3. 'status' (Short-term, Imp: <40): "Headache", "Wants to go to cinema". DELETE if not important.

    INSTRUCTION:
    1. Analyze the dialogue.
    2. If there are new facts -> add to 'added'. Primary language is ENGLISH. HOWEVER, technical terms, technology names, brands, and specific concepts (Smart Home, Enterprise API, AppSec, cookie check, etc.) MUST be kept in English. Do not translate or transliterate them.
    3. If an old fact changed (clarification or change) -> add to 'updated'.
    4. If the list CURRENT FACTS contains entries in other languages -> translate the description to English, but KEEP all technical terms in English.
    5. If a fact became irrelevant or erroneous -> add to 'removed'.
    6. Avoid duplicates. Consolidate information, BUT preserve atomicity of meanings.
    7. IMPORTANT: The 'reason' field (reason for change) must be STRICTLY IN ENGLISH for all operations.
    8. FORBIDDEN: Do not merge facts from different categories (e.g., 'work' and 'health') into one entry. This breaks search.

    LIMITS:
    - Target number of facts about 'User': ~%[2]d (Current: %[3]d).
    - Target number of OTHER personalities: ~30 (Current: %[4]d).
    - Keep facts about OTHER people (family, colleagues) separate. Try to create ONE rich card per person.
    - ATTENTION: If facts about 'User' > %[2]d, you MUST start AGGRESSIVELY MERGING (updated) or DELETING (removed) least important ones (status/context).
    - Do not delete important facts (identity/bio) to save space, but try to formulate them as concisely as possible.
    - If the number of other personalities > 30, delete the least important ones.

    USER FACTS:
    %[5]s

    OTHER PEOPLE FACTS:
    %[6]s

    DIALOGUE:
    %[7]s

  consolidation_prompt: |
    You are a knowledge base manager.
    NEW FACT: %s

    EXISTING SIMILAR FACTS:
    %s

    TASK: Determine how the NEW fact relates to the EXISTING ones.
    Action options (action):
    - IGNORE: New fact carries no new information (complete duplicate).
    - REPLACE: New fact replaces the old one (status update). Specify target_id of the old one.
    - MERGE: Merge facts. Specify target_id of the old one and new_content (merged text).
    - ADD: This is a completely different fact, despite similarity.

    Answer in JSON.

telegram:
  forwarded_from: "[Forwarded from %s by user %s at %s]"
